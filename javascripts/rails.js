jQuery(function(t){var e=t("meta[name=csrf-token]").attr("content"),a=t("meta[name=csrf-param]").attr("content");t.fn.extend({triggerAndReturn:function(e,a){var r=new t.Event(e);return this.trigger(r,a),r.result!==!1},callRemote:function(){var e=this,a=e.attr("method")||e.attr("data-method")||"GET",r=e.attr("action")||e.attr("href"),i=e.attr("data-type")||"script";if(void 0===r)throw"No URL specified for remote call (action or href must be present).";if(e.triggerAndReturn("ajax:before")){var n=e.is("form")?e.serializeArray():[];t.ajax({url:r,data:n,dataType:i,type:a.toUpperCase(),beforeSend:function(t){e.trigger("ajax:loading",t)},success:function(t,a,r){e.trigger("ajax:success",[t,a,r])},complete:function(t){e.trigger("ajax:complete",t)},error:function(t,a,r){e.trigger("ajax:failure",[t,a,r])}})}e.trigger("ajax:after")}}),t("a[data-confirm],input[data-confirm]").live("click",function(){var e=t(this);return e.triggerAndReturn("confirm")&&!confirm(e.attr("data-confirm"))?!1:void 0}),t("form[data-remote]").live("submit",function(e){t(this).callRemote(),e.preventDefault()}),t("a[data-remote],input[data-remote]").live("click",function(e){t(this).callRemote(),e.preventDefault()}),t("a[data-method]:not([data-remote])").live("click",function(r){var i=t(this),n=i.attr("href"),o=i.attr("data-method"),d=t('<form method="post" action="'+n+'"></form>'),c='<input name="_method" value="'+o+'" type="hidden" />';null!=a&&null!=e&&(c+='<input name="'+a+'" value="'+e+'" type="hidden" />'),d.hide().append(c).appendTo("body"),r.preventDefault(),d.submit()});var r="input[data-disable-with]",i="form[data-remote]:has("+r+")";t(i).live("ajax:before",function(){t(this).find(r).each(function(){var e=t(this);e.data("enable-with",e.val()).attr("value",e.attr("data-disable-with")).attr("disabled","disabled")})}),t(i).live("ajax:complete",function(){t(this).find(r).each(function(){var e=t(this);e.removeAttr("disabled").val(e.data("enable-with"))})})});